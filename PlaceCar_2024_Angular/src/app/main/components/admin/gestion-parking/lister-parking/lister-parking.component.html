<div class="grid">
	<div class="col-12">
		<div class="card">
			<h5>Parkings</h5>
			<p-table #dt1 [value]="parkings" dataKey="id" [rows]="parkings.length" [loading]="loading" [rowHover]="true" styleClass="p-datatable-gridlines" [paginator]="true" 
				[globalFilterFields]="[]" responsiveLayout="scroll">			
                <ng-template pTemplate="caption">
					<!--<div class="flex justify-content-between flex-column sm:flex-row">-->
					<div>
						<form [formGroup]="rechercheForm" >
							<div class="p-fluid p-formgrid grid">
								
								<div class="field col-12 md:col-3">
									<label htmlFor="pays">Pays</label>
									<p-dropdown id="pays" [options]="paysItems" optionLabel="payS_Nom" formControlName="pays" 
									(onChange)="onPaysChange($event)"></p-dropdown>
									<small class="p-error block" *ngIf="rechercheForm.get('pays')?.invalid && rechercheForm.get('pays')?.touched">
										Pays est obligatoire
									</small>
								</div>
								<div class="field col-12 md:col-3">
									<label htmlFor="ville">Ville</label>
									<p-dropdown id="ville" [options]="villeItems" optionLabel="" formControlName="ville" 
									(onChange)="onVilleChange($event)"></p-dropdown>
									<small class="p-error block" *ngIf="rechercheForm.get('ville')?.invalid && rechercheForm.get('ville')?.touched">
										Ville est obligatoire
									</small>
								</div>      
								<div class="field col-12 md:col-3">
								</div>  
								<div class="field col-12 md:col-3">
									<label>&nbsp;</label>
									<span class="p-input-icon-left mb-2">
										<i class="pi pi-search"></i>
										<input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Recherche" class="w-full"/>
									</span>
								</div>                         
							</div>
						</form>

                        <!--
						<button pButton label="Clear" class="p-button-outlined mb-2" icon="pi pi-filter-slash" (click)="clear(dt1)"></button>
						<span class="p-input-icon-left mb-2">
							<label></label>
							<i class="pi pi-search"></i>
							<input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Recherche" class="w-full"/>
						</span>
                        -->
						<div>
							<button pButton label="Ajouter un parking" class="p-button-outlined mb-2" icon="pi pi-add" 
							(click)="ajouterParking()"></button>
						</div>
					</div>
				</ng-template>
				<ng-template pTemplate="header">
					<tr>
						<th style="min-width: 12rem">
							<div class="flex justify-content-between align-items-center">
								Id
                                <!--
								<p-columnFilter type="text" field="payS_Id" display="menu" placeholder="Search by name"></p-columnFilter>
                                -->
							</div>
						</th>
						<th style="min-width: 12rem">
							<div class="flex justify-content-between align-items-center">
								Nom
                                 <!--
								<p-columnFilter type="text" field="payS_Nom" display="menu" placeholder="Search by country"></p-columnFilter>
                                -->
							</div>
						</th>
                        <th style="min-width: 12rem">
							<div class="flex justify-content-between align-items-center">
								Adresse
                                 <!--
								<p-columnFilter type="text" field="payS_Nom" display="menu" placeholder="Search by country"></p-columnFilter>
                                -->
							</div>
						</th>
                        <th style="min-width: 12rem">
							<div class="flex justify-content-between align-items-center">
								Détail
                                 <!--
								<p-columnFilter type="text" field="payS_Nom" display="menu" placeholder="Search by country"></p-columnFilter>
                                -->
							</div>
						</th>
                        <th style="min-width: 12rem">
							<div class="flex justify-content-between align-items-center">
								Actions
                                 <!--
								<p-columnFilter type="text" field="payS_Nom" display="menu" placeholder="Search by country"></p-columnFilter>
                                -->
							</div>
						</th>
					</tr>
				</ng-template>
				<ng-template pTemplate="body" let-parking>
					<tr>
                        <td>
                            {{parking.parK_Id}}
						</td>
						<td>
                            {{parking.parK_Nom}}
						</td>
                        <td>
                            {{parking.adrS_Numero}}, {{parking.adrS_NomRue}}<br>
						</td>
                        <td>
                            Nombre d'étages : {{parking.parK_NbEtages}} <br>
                            Nombre de places : {{parking.parK_NbPlaces}}
						</td>
                        <td>
                            <button title="Ajouter employé dans ce parking" pButton pRipple type="button" icon="pi pi-user-plus" class="p-button-rounded p-button-info" 
                             (click)="ajouterEmploye(parking.parK_Id, parking.parK_Nom, parking.adrS_Numero, parking.adrS_NomRue)"></button>
                            &nbsp;
                            <button title="Lister employé de ce parking" pButton pRipple type="button" icon="pi pi-list" class="p-button-rounded p-button-warning"
                            (click)="listerEmploye(parking.parK_Id, parking.parK_Nom, parking.adrS_Numero, parking.adrS_NomRue)"></button>
                        </td>
					</tr>
				</ng-template>
				<ng-template pTemplate="emptymessage">
					<tr>
						<td colspan="8">Aucune donnée disponible.</td>
					</tr>
				</ng-template>
				<ng-template pTemplate="loadingbody">
					<tr>
						<td colspan="8">Chargement des pays. En attente ...</td>
					</tr>
				</ng-template>
    		</p-table>
		</div>

	</div>
</div>
